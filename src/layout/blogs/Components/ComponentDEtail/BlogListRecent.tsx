import React, { useEffect, useState } from "react";
import { GET_USER_BLOG_NEW } from "../../../../api/api";
interface Blog {
  id: number;
  title: string;
  createdAt: string;
  image?: string; 
}
export const BlogListRecent = () => {
  const [blogs, setBlogs] = useState<Blog[]>([]);

  useEffect(() => {
    const fetchBlogs = async () => {
      try {
        const response = await fetch(GET_USER_BLOG_NEW);
        const data = await response.json();
        setBlogs(data);
      } catch (error) {
        console.error("Error fetching blogs:", error);
      }
    };

    fetchBlogs();
  }, []);
  return (
    <div className="item resent-post mb-4">
      <h3>Bài viết mới nhất</h3>
      <ul>
        {blogs.map((blog) => (
          <li key={blog.id}>
            <img
              src={blog.image || "../assets/images/blog/default.png"} // Dùng default image nếu không có image
              alt="blog"
              width={"50%"}
            />
            <div>
              <span className="fs-14">
                <svg
                  className="me-1"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.66797 3.79102C5.3263 3.79102 5.04297 3.50768 5.04297 3.16602V0.666016C5.04297 0.324349 5.3263 0.0410156 5.66797 0.0410156C6.00964 0.0410156 6.29297 0.324349 6.29297 0.666016V3.16602C6.29297 3.50768 6.00964 3.79102 5.66797 3.79102ZM12.3346 3.79102C11.993 3.79102 11.7096 3.50768 11.7096 3.16602V0.666016C11.7096 0.324349 11.993 0.0410156 12.3346 0.0410156C12.6763 0.0410156 12.9596 0.324349 12.9596 0.666016V3.16602C12.9596 3.50768 12.6763 3.79102 12.3346 3.79102ZM6.08464 11.0827C5.9763 11.0827 5.86797 11.0577 5.76797 11.016C5.65964 10.9743 5.5763 10.916 5.49297 10.841C5.34297 10.6827 5.2513 10.4743 5.2513 10.2493C5.2513 10.141 5.2763 10.0327 5.31797 9.93268C5.35964 9.83268 5.41797 9.74102 5.49297 9.65768C5.5763 9.58268 5.65964 9.52435 5.76797 9.48268C6.06797 9.35768 6.44297 9.42435 6.6763 9.65768C6.8263 9.81602 6.91797 10.0327 6.91797 10.2493C6.91797 10.2993 6.90964 10.3577 6.9013 10.416C6.89297 10.466 6.8763 10.516 6.8513 10.566C6.83464 10.616 6.80964 10.666 6.7763 10.716C6.7513 10.7577 6.70964 10.7993 6.6763 10.841C6.51797 10.991 6.3013 11.0827 6.08464 11.0827ZM9.0013 11.0827C8.89297 11.0827 8.78464 11.0577 8.68464 11.016C8.5763 10.9743 8.49297 10.916 8.40964 10.841C8.25964 10.6827 8.16797 10.4743 8.16797 10.2493C8.16797 10.141 8.19297 10.0327 8.23464 9.93268C8.2763 9.83268 8.33464 9.74102 8.40964 9.65768C8.49297 9.58268 8.5763 9.52435 8.68464 9.48268C8.98464 9.34935 9.35964 9.42435 9.59297 9.65768C9.74297 9.81602 9.83464 10.0327 9.83464 10.2493C9.83464 10.2993 9.8263 10.3577 9.81797 10.416C9.80964 10.466 9.79297 10.516 9.76797 10.566C9.7513 10.616 9.7263 10.666 9.69297 10.716C9.66797 10.7577 9.6263 10.7993 9.59297 10.841C9.43464 10.991 9.21797 11.0827 9.0013 11.0827ZM11.918 11.0827C11.8096 11.0827 11.7013 11.0577 11.6013 11.016C11.493 10.9743 11.4096 10.916 11.3263 10.841L11.2263 10.716C11.1947 10.6696 11.1695 10.6191 11.1513 10.566C11.1272 10.5188 11.1104 10.4682 11.1013 10.416C11.093 10.3577 11.0846 10.2993 11.0846 10.2493C11.0846 10.0327 11.1763 9.81602 11.3263 9.65768C11.4096 9.58268 11.493 9.52435 11.6013 9.48268C11.9096 9.34935 12.2763 9.42435 12.5096 9.65768C12.6596 9.81602 12.7513 10.0327 12.7513 10.2493C12.7513 10.2993 12.743 10.3577 12.7346 10.416C12.7263 10.466 12.7096 10.516 12.6846 10.566C12.668 10.616 12.643 10.666 12.6096 10.716C12.5846 10.7577 12.543 10.7993 12.5096 10.841C12.3513 10.991 12.1346 11.0827 11.918 11.0827ZM6.08464 13.9993C5.9763 13.9993 5.86797 13.9743 5.76797 13.9327C5.66797 13.891 5.5763 13.8327 5.49297 13.7577C5.34297 13.5993 5.2513 13.3827 5.2513 13.166C5.2513 13.0577 5.2763 12.9494 5.31797 12.8493C5.35964 12.741 5.41797 12.6494 5.49297 12.5744C5.8013 12.266 6.36797 12.266 6.6763 12.5744C6.8263 12.7327 6.91797 12.9493 6.91797 13.166C6.91797 13.3827 6.8263 13.5993 6.6763 13.7577C6.51797 13.9077 6.3013 13.9993 6.08464 13.9993ZM9.0013 13.9993C8.78464 13.9993 8.56797 13.9077 8.40964 13.7577C8.25964 13.5993 8.16797 13.3827 8.16797 13.166C8.16797 13.0577 8.19297 12.9494 8.23464 12.8493C8.2763 12.741 8.33464 12.6494 8.40964 12.5744C8.71797 12.266 9.28464 12.266 9.59297 12.5744C9.66797 12.6494 9.7263 12.741 9.76797 12.8493C9.80964 12.9494 9.83464 13.0577 9.83464 13.166C9.83464 13.3827 9.74297 13.5993 9.59297 13.7577C9.43464 13.9077 9.21797 13.9993 9.0013 13.9993ZM11.918 13.9993C11.7013 13.9993 11.4846 13.9077 11.3263 13.7577C11.2492 13.6794 11.1895 13.5857 11.1513 13.4827C11.1096 13.3827 11.0846 13.2743 11.0846 13.166C11.0846 13.0577 11.1096 12.9494 11.1513 12.8493C11.193 12.741 11.2513 12.6494 11.3263 12.5744C11.518 12.3827 11.8096 12.291 12.0763 12.3493C12.1346 12.3577 12.1846 12.3743 12.2346 12.3993C12.2846 12.416 12.3346 12.441 12.3846 12.4743C12.4263 12.4993 12.468 12.541 12.5096 12.5744C12.6596 12.7327 12.7513 12.9493 12.7513 13.166C12.7513 13.3827 12.6596 13.5993 12.5096 13.7577C12.3513 13.9077 12.1346 13.9993 11.918 13.9993ZM16.0846 7.19935H1.91797C1.5763 7.19935 1.29297 6.91602 1.29297 6.57435C1.29297 6.23268 1.5763 5.94935 1.91797 5.94935H16.0846C16.4263 5.94935 16.7096 6.23268 16.7096 6.57435C16.7096 6.91602 16.4263 7.19935 16.0846 7.19935Z"
                    fill="#2EB97E"
                  />
                  <path
                    d="M12.3333 17.9577H5.66667C2.625 17.9577 0.875 16.2077 0.875 13.166V6.08268C0.875 3.04102 2.625 1.29102 5.66667 1.29102H12.3333C15.375 1.29102 17.125 3.04102 17.125 6.08268V13.166C17.125 16.2077 15.375 17.9577 12.3333 17.9577ZM5.66667 2.54102C3.28333 2.54102 2.125 3.69935 2.125 6.08268V13.166C2.125 15.5493 3.28333 16.7077 5.66667 16.7077H12.3333C14.7167 16.7077 15.875 15.5493 15.875 13.166V6.08268C15.875 3.69935 14.7167 2.54102 12.3333 2.54102H5.66667Z"
                    fill="#2EB97E"
                  />
                </svg>
                {new Date(blog.createdAt).toLocaleDateString("vi-VN")}
              </span>
              <h5>
                <a href={`/bai-viet/${blog.id}`} className="primary-hover">
                  {blog.title}
                </a>
              </h5>
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
};
